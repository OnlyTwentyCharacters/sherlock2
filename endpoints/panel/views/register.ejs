<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Panel - Register</title>
    <link href="/static/styles/panel.css" rel="stylesheet">
    <style>.error { display: none; }</style>
    <script src="/static/scripts/jquery/3.1.1.js"></script>
    <script>
        $(() => {
            $("#form").on("submit", event => {
                event.preventDefault();
                const username = $("#username").val();
                const password = $("#password").val();
                const auth = $("#authkey").val();

                if (!username || !password || !auth) {
                    $(".error").show();
                    return $("#errmsg").text("Please complete all fields");
                }

                $.post("/api/register", { username, password, auth }, data => {
                    if (data.ok) {
                        window.location.replace("/panel/login");
                    } else {
                        $(".error").show();
                        $("#errmsg").text(data.error);
                        return false;
                    }
                });

                return false;
            });
        });
    </script>
</head>
<body>

    <div class="login">
        <div class="box">
            <div class="title">
                <span>Register</span>
            </div>

            <div class="info">
                <span>Please get a Registration Key from the webmaster before continuing.</span>
            </div>

            <div class="error">
                <span id="errmsg"></span>
            </div>

            <div class="inputs">
                <form target="" id="form">
                    <input id="email" type="text" placeholder="Email" required autocomplete="off">
                    <input id="nickname" type="text" placeholder="Display Name" required autocomplete="off">
                    <input id="password" type="password" placeholder="Password" required autocomplete="off">
                    <input id="password2" type="password" placeholder="Confirm Password" required autocomplete="off">
                    <input id="authkey" type="text" placeholder="Registration Key" required autocomplete="off">
                    <div class="buttons">
                        <a href="/panel/login" class="button">Back</a>
                        <input type="submit" value="Submit">
                    </div>
                </form>
            </div>
        </div>
    </div>

</body>
</html>
